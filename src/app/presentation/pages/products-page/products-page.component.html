
<div flex-col class="main-cont">

    <div style="height: 2em; width: auto;"></div>

    <div flex class="cont-list">
        <!-- Fila superior para móviles: input de búsqueda + botón de filtros (solo visible en <=600px) -->
        <div class="mobile-top-row">
            <input class="sub-top-inp inp-a mobile-search-input" [formControl]="inpSearch" placeholder="Buscar Producto" type="text" />
            <button class="mobile-filter-btn" (click)="toggleSidebarMobile()">Filtros</button>
        </div>

        <!-- Overlay semitransparente que cierra el panel si se clickea -->
        <div class="mobile-filter-overlay" *ngIf="showSidebarMobile" (click)="toggleSidebarMobile()"></div>

    <div flex-col class="side-bar" [class.show-on-mobile]="showSidebarMobile">

        <!-- Botón cerrar (X) visible sólo cuando el panel móvil está abierto -->
        <button type="button" class="mobile-close-btn" aria-label="Cerrar filtros" (click)="toggleSidebarMobile()">✕</button>

        <p ft-16-500>Búsqueda</p>

            <input 
                class="sub-top-inp inp-a" [formControl]="inpSearch" placeholder="Buscar Producto" type="text" >

            <p ft-16-500>Filtros</p>

            <div flex class="max-min-cont">
                <input 
                    class="sub-top-inp inp-b inp-no-arrow" [formControl]="inpMin" placeholder="Min." type="number" min="0" >

                <p ft-28-400>-</p>

                <input
                    class="sub-top-inp inp-b inp-no-arrow" [formControl]="inpMax" placeholder="Max." type="number" min="0" > 

                <button (click)="filterPrice()" class="side-bttn">Ok</button>
            </div>


            <div class="message">
                <p ft-14-500>Si no consigues lo que buscas, no dudes en contactarme al WhatsApp</p>
            </div>

            <div flex-col class="side-bar-categos">
                <p ft-16-500>Tipo de Repuesto</p>
                <div style="width: auto; height: 0.3em;"></div>
                <p cp ft-14-400 (click)="goWhere('products/bujia')" >Bujías</p>
                <p cp ft-14-400 (click)="goWhere('products/ventilador')" >Ventiladores</p>
                <p cp ft-14-400 (click)="goWhere('products/bajante')" >Bajantes</p>
            </div>

            <div flex-col class="side-bar-categos">
                <p ft-16-500>Modelo de Auto</p>
                <div style="width: auto; height: 0.3em;"></div>
                <p cp ft-14-400 (click)="goWhere('products/hilux')">Hilux</p>
                <p cp ft-14-400 (click)="goWhere('products/autana')">Autana</p>
                <p cp ft-14-400 (click)="goWhere('products/machito')">Machito</p>
            </div>

        </div>

        @if( products.length == 0 ) {
            <div flex-col style="
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;
                min-height: 30em;
                color: rgb(98, 98, 98);
            "> 
                <p icon style="font-size: 90px;">search_off</p>
                <p ft-28-400>No hay resultados</p>
            </div>
        } @else {
            <div class="side-items">
                @for( i of displayedProducts; track $index ) {
                    <card-item @slideDown [inputData]=i></card-item>
                }
            </div>

            
            
        }

    </div>

            <!-- Paginación (fuera del contenedor principal para que quede debajo del grid) -->
            <div class="pagination-block" aria-label="Paginación de productos">
                <div class="pagination-inner">
                    <button class="pagination-btn" (click)="prevPage()" [disabled]="currentPage===1" aria-label="Anterior">←</button>

                    <div class="pagination-info">
                        <span class="page-label">Página</span>
                        <span class="page-current">{{currentPage}}</span>
                        <span class="page-sep">/</span>
                        <span class="page-total">{{totalPages}}</span>
                    </div>

                    <button class="pagination-btn" (click)="nextPage()" [disabled]="currentPage===totalPages" aria-label="Siguiente">→</button>
                </div>

                <div class="pagination-meta">
                    Mostrando <strong>{{startIndex}}</strong> - <strong>{{endIndex}}</strong> de <strong>{{ totalItems }}</strong>
                </div>
            </div>

</div>