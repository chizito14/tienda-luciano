<section class="best-seller">
	
	<div class="bs-grid">
		<article
			class="bs-card"
			*ngFor="let p of products; trackBy: trackById"
			
		>
			<div class="card-media">
				<img [src]="p.imagen" [alt]="p.description" loading="lazy" />
				<span class="badge-discount" *ngIf="p.discount">{{ p.discount }}</span>
				<span class="badge-new" *ngIf="p.isNew">Nuevo</span>
			</div>

			<div class="card-body">
				<h3 ft-16-500 class="card-title">{{ p.description }}</h3>

				<p ft-12-400 class="card-meta" *ngIf="p.rating || p.soldCount">
					<span *ngIf="p.rating">⭐ {{ p.rating }}</span>
					<span *ngIf="p.soldCount"> • {{ p.soldCount }} vendidos</span>
				</p>

				<!-- Si existe descuento, mostramos precio original tachado y el precio con descuento -->
				<p ft-14-600 class="card-price">
					<ng-container *ngIf="p.discount; else noDiscount">
						<span class="price-old">{{ formatPrice(p.precio) }}</span>
						<span class="price-new">{{ formatPrice(getDiscountedPrice(p)) }}</span>
					</ng-container>
					<ng-template #noDiscount>
						{{ formatPrice(p.precio) }}
					</ng-template>
				</p>

				<div class="card-actions">
					<button class="btn-primary" (click)="addItem(p)">Agregar</button>
				</div>
			</div>
		</article>
	</div>
</section>